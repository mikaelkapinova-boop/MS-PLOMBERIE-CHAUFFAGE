<!DOCTYPE html> <html lang="fr" data-theme="dark"> <head> <meta charset="UTF-8" /> <meta name="viewport" content="width=device-width, initial-scale=1.0"/> <title>MS Plomberie & Chauffage - Plombier Chauffagiste Nancy | Devis Gratuit</title>

<link rel="preconnect" href="https://fonts.googleapis.com"> <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin> <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">

<!-- Leaflet (carte interactive) --> <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" integrity="" crossorigin=""/> <style> /* Reset & variables */

{ margin:0; padding:0; box-sizing:border-box; } body { font-family:'Inter', system-ui, -apple-system, sans-serif; background:var(--bg); color:var(--text); line-height:1.6; overflow-x:hidden; }
/* Theme variables */ :root[data-theme='dark'] { --bg: #0a0a0a; --bg-gradient: linear-gradient(135deg,#0a0a0a 0%,#1a1a1a 50%,#0a0a0a 100%); --text: #fff; --text-secondary:#b3b3b3; --accent:#4CAF50; --accent-hover:#45a049; --card-bg: rgba(255,255,255,0.04); --navbar-bg: rgba(0,0,0,0.85); --border: rgba(255,255,255,0.08); } :root[data-theme='light'] { --bg:#fff; --bg-gradient: linear-gradient(135deg,#f8f9fa 0%,#e9ecef 50%,#f8f9fa 100%); --text:#212529; --text-secondary:#6c757d; --accent:#4CAF50; --accent-hover:#45a049; --card-bg: rgba(0,0,0,0.03); --navbar-bg: rgba(255,255,255,0.95); --border: rgba(0,0,0,0.08); }

/* NAVBAR - plus fin (style Apple) / .navbar { position: fixed; top:0; left:0; right:0; height: 56px; / header plus fin */ display:flex; align-items:center; justify-content:space-between; padding: 0 1.6rem; background: var(--navbar-bg); backdrop-filter: blur(12px) saturate(160%); z-index:1200; border-bottom:1px solid var(--border); transition: all .25s ease; }

/* Logo area */ .logo { display:flex; align-items:center; gap:0.75rem; text-decoration:none; color:var(--text); font-weight:700; } .logo img { height:28px; width:auto; display:block; } .logo .brand-note { font-size:0.85rem; color:var(--text-secondary); line-height:1; }

/* Small file list next to logo (demandÃ©) */ .logo .files { font-size:0.72rem; color:var(--text-secondary); margin-top:2px; }

/* nav-controls */ .nav-controls{ display:flex; align-items:center; gap:1rem; }

/* theme toggle (kept) */ .theme-toggle { width:56px; height:28px; border-radius:999px; background:#333; position:relative; cursor:pointer; border:1px solid #555; } :root[data-theme='light'] .theme-toggle { background:#e0e0e0; border-color:#ccc; } .theme-toggle::before{ content:'ğŸŒ™'; position:absolute; left:8px; top:6px; font-size:12px; opacity:1;} .theme-toggle::after{ content:'â˜€ï¸'; position:absolute; right:8px; top:6px; font-size:12px; opacity:0.3;} .theme-toggle .toggle-circle { position:absolute; top:3px; left:3px; width:22px; height:22px; border-radius:50%; background:#fff; transition:all .25s ease; box-shadow:0 2px 6px rgba(0,0,0,.2); } :root[data-theme='light'] .theme-toggle .toggle-circle { left:31px; background:#333; }

/* MENU BUTTON: deux barres -> croix / .menu-btn { background:none; border:0; cursor:pointer; width:36px; height:36px; position:relative; display:flex; align-items:center; justify-content:center; } .menu-btn span { display:block; width:22px; height:3px; background:var(--text); border-radius:3px; transition:all .28s ease; position:relative; } .menu-btn span + span { margin-top:6px; } / second bar below first */

.menu-btn.open span:nth-child(1){ transform: rotate(45deg) translate(0,0); position:absolute; } .menu-btn.open span:nth-child(2){ transform: rotate(-45deg) translate(0,0); position:absolute; }

/* Menu overlay */ .menu-overlay { position:fixed; inset:0; background:rgba(0,0,0,0.95); display:flex; flex-direction:column; justify-content:center; align-items:center; opacity:0; visibility:hidden; transition:all .25s ease; z-index:1100; } .menu-overlay.active { opacity:1; visibility:visible; } .menu-overlay a { color:#fff; font-size:1.6rem; margin:0.8rem 0; text-decoration:none; font-weight:500; }

/* Hero */ .hero { min-height:80vh; display:flex; align-items:center; justify-content:center; text-align:center; padding:2rem; background:var(--bg-gradient); position:relative; overflow:hidden;} .hero::before { content:''; position:absolute; inset:0; background: linear-gradient(rgba(0,0,0,0.25),rgba(0,0,0,0.25)), url('images/real1.jpg'); background-size:cover; background-position:center; z-index:-1; filter:brightness(.9); } .hero-content{ max-width:900px; color:var(--text); } .experience-badge{ background:var(--accent); color:#fff; padding:.45rem 1.2rem; border-radius:999px; display:inline-block; font-weight:600; margin-bottom:1.2rem; }

/* Sections generic */ .section{ padding:4rem 1.6rem; background:var(--bg); } .container{ max-width:1200px; margin:0 auto; } .section-title{ font-size:clamp(1.6rem,3.6vw,2.6rem); font-weight:700; text-align:center; margin-bottom:.6rem; color:var(--text); } .section-subtitle{ text-align:center; color:var(--text-secondary); margin-bottom:2rem; }

/* Gallery - change made to one item to show Salle de bain */ .gallery-grid{ display:grid; grid-template-columns:repeat(auto-fit,minmax(260px,1fr)); gap:1rem; } .gallery-item{ border-radius:12px; overflow:hidden; position:relative; aspect-ratio:4/3; cursor:pointer; } .gallery-item img{ width:100%; height:100%; object-fit:cover; transition:transform .3s ease; } .gallery-item:hover img{ transform:scale(1.06); } .gallery-overlay{ position:absolute; inset:0; display:flex; align-items:flex-end; padding:1rem; background:linear-gradient(to top,rgba(0,0,0,0.6),transparent); opacity:0; transition:opacity .25s ease; } .gallery-item:hover .gallery-overlay{ opacity:1; } .gallery-overlay h4{ color:#fff; }

/* Contact / forms / small tweaks unchanged except email -> mailto handled in HTML */

/* Map container for Leaflet */ #leaflet-map{ height:340px; border-radius:12px; width:100%; }

/* Zone card grid: responsive */ .zone-content{ display:grid; grid-template-columns:1fr 1fr; gap:1.2rem; align-items:center; } .zone-intervention{ background:var(--card-bg); padding:1.2rem; border-radius:12px; border:1px solid var(--border); }

/* Testimonials */ .testimonials{ display:grid; grid-template-columns:repeat(auto-fit,minmax(260px,1fr)); gap:1rem; margin-top:1rem; } .testimonial-card{ background:var(--card-bg); padding:1rem; border-radius:10px; border:1px solid var(--border); }

/* Responsive / @media (max-width: 900px) { .navbar { height:52px; padding:0 1rem; } .logo img { height:26px; } .zone-content{ grid-template-columns:1fr; } .hero { min-height:60vh; padding:1rem; } } @media (max-width:480px) { .navbar { height:48px; } .logo img { height:22px; } .menu-btn { width:34px; height:34px; } .theme-toggle{ display:none; } / small screens: optional hide */ }

/* Animations au scroll - classes existantes */ .fade-in{ opacity:0; transform:translateY(20px); transition:all .6s ease; } .fade-in.visible{ opacity:1; transform:translateY(0); } .slide-in-left{ opacity:0; transform:translateX(-30px); transition:all .6s ease; } .slide-in-left.visible{ opacity:1; transform:translateX(0); } .slide-in-right{ opacity:0; transform:translateX(30px); transition:all .6s ease; } .slide-in-right.visible{ opacity:1; transform:translateX(0); }

</style> </head> <body> <!-- NAV --> <nav class="navbar"> <a href="#home" class="logo"> <!-- Utilise le dossier images local si possible, fallback vers raw.githubusercontent si absent --> <img src="images/logo.png" alt="MS Plomberie Logo" onerror="this.src='https://raw.githubusercontent.com/mikaelkapinova-boop/images/main/logo.png';"> <div> <div style="font-weight:700">MS PLOMBERIE CHAUFFAGE</div> <div class="files">logo.png â€¢ real1.jpg â€¢ real2.jpg â€¢ real3.jpg</div> </div> </a>

<div class="nav-controls">
  <div id="theme-toggle" class="theme-toggle" title="Changer le thÃ¨me">
    <div class="toggle-circle"></div>
  </div>

  <!-- MENU BUTTON: ici 2 spans (deux barres) -->
  <button id="menu-btn" class="menu-btn" aria-label="Menu">
    <span></span>
    <span></span>
  </button>
</div>
</nav>

<!-- Overlay menu --> <div id="menu-overlay" class="menu-overlay" aria-hidden="true"> <a href="#home">ğŸ  Accueil</a> <a href="#services">ğŸ”§ Services</a> <a href="#zone">ğŸ“ Zone d'intervention</a> <a href="#realisations">ğŸ“¸ RÃ©alisations</a> <a href="#temoignages">â­ TÃ©moignages</a> <a href="#contact">ğŸ“ Contact</a> </div>

<!-- Call button --> <a href="tel:0749248559" class="call-button" style="position:fixed; right:1.4rem; bottom:1.4rem; width:56px; height:56px; border-radius:999px; background:var(--accent); display:flex; align-items:center; justify-content:center; text-decoration:none; color:#fff; z-index:1000;">ğŸ“</a>

<!-- HERO --> <section class="hero" id="home"> <div class="hero-content"> <div class="experience-badge">âœ¨ 15 ans d'expÃ©rience</div> <h1 style="font-size:clamp(1.8rem,4.2vw,3.4rem); font-weight:800; margin:0.6rem 0;">L'EXPERTISE AU SERVICE DE VOTRE BIEN-ÃŠTRE</h1> <p style="margin-bottom:1.2rem;">ğŸ”§ Solutions fiables et durables pour tous vos projets de plomberie, chauffage et salles de bain dans un rayon de 80km autour de Nancy</p> <div style="display:flex; gap:.8rem; justify-content:center; flex-wrap:wrap;"> <a href="#contact" class="btn" style="background:var(--accent); color:#fff; padding:.9rem 1.2rem; border-radius:999px; text-decoration:none; font-weight:600;">ğŸ“‹ Devis Gratuit</a> <a href="tel:0749248559" class="btn" style="background:transparent; border:2px solid rgba(255,255,255,.18); color:var(--text); padding:.7rem 1rem; border-radius:999px; text-decoration:none;">ğŸ“ 07 49 24 85 59</a> </div> </div> </section>

<!-- SERVICES --> <section class="section" id="services"> <div class="container"> <h2 class="section-title fade-in">NOS SERVICES</h2> <p class="section-subtitle fade-in">Une expertise complÃ¨te pour tous vos besoins en plomberie, chauffage et ventilation</p>

  <div class="services-grid" style="display:grid; grid-template-columns:repeat(auto-fit,minmax(260px,1fr)); gap:1rem;">
    <div class="service-card fade-in" style="padding:1rem; border-radius:12px;">
      <div style="width:64px;height:64px;border-radius:50%;background:var(--accent);display:flex;align-items:center;justify-content:center;margin:0 auto 1rem;font-size:1.6rem;color:#fff;">ğŸš¿</div>
      <h3>Plomberie</h3>
      <p style="color:var(--text-secondary);">Nouvelles installations â€¢ Salles de bain clÃ©s en main â€¢ RÃ©parations et remplacements</p>
    </div>

    <div class="service-card fade-in" style="padding:1rem;border-radius:12px;">
      <div style="width:64px;height:64px;border-radius:50%;background:var(--accent);display:flex;align-items:center;justify-content:center;margin:0 auto 1rem;font-size:1.6rem;color:#fff;">ğŸŒ¡ï¸</div>
      <h3>Chauffage</h3>
      <p style="color:var(--text-secondary);">Installations chaudiÃ¨res & pompes Ã  chaleur â€¢ Entretien et maintenance</p>
    </div>

    <div class="service-card fade-in" style="padding:1rem;border-radius:12px;">
      <div style="width:64px;height:64px;border-radius:50%;background:var(--accent);display:flex;align-items:center;justify-content:center;margin:0 auto 1rem;font-size:1.6rem;color:#fff;">ğŸ’¨</div>
      <h3>Ventilation</h3>
      <p style="color:var(--text-secondary);">VMC, qualitÃ© de l'air intÃ©rieur, maintenance</p>
    </div>
  </div>
</div>
</section>

<!-- ZONE + MAP (Leaflet interactive) --> <section class="section" id="zone"> <div class="container"> <h2 class="section-title fade-in">ZONE D'INTERVENTION</h2> <p class="section-subtitle fade-in">ğŸš— Nous intervenons dans un rayon de 80km autour de Nancy</p>

  <div class="zone-intervention">
    <div class="zone-content">
      <div>
        <h3 style="color:var(--accent);">ğŸ“ Secteurs desservis</h3>
        <ul style="color:var(--text-secondary); margin:1rem 0 0 0;">
          <li>Nancy et agglomÃ©ration</li>
          <li>Metz et environs</li>
          <li>Ã‰pinal et sa rÃ©gion</li>
          <li>Toul, Pont-Ã -Mousson</li>
          <li>LunÃ©ville, Saint-DiÃ©</li>
          <li>Bar-le-Duc, Commercy</li>
        </ul>

        <div style="margin-top:1rem; padding:0.8rem; background:rgba(76,175,80,0.07); border-left:4px solid var(--accent); border-radius:8px;">
          <strong>â° Horaires :</strong> Lun-Ven 8h-18h â€¢ Urgences 7j/7 â€¢ Devis gratuit
        </div>

        <div style="margin-top:1rem;">
          <button id="add-testimony-btn" class="btn" style="background:var(--accent); border-radius:10px; padding:.6rem .9rem; color:#fff;">â• Ajouter un tÃ©moignage sur la carte</button>
          <p style="font-size:0.85rem; color:var(--text-secondary); margin-top:.5rem;">Cliquez sur la carte pour dÃ©poser un marqueur puis remplissez le formulaire du marqueur.</p>
        </div>
      </div>

      <div id="leaflet-map"></div>
    </div>
  </div>
</div>
</section>

<!-- REALISATIONS (gallery) --> <section class="section" id="realisations"> <div class="container"> <h2 class="section-title fade-in">NOS RÃ‰ALISATIONS</h2> <p class="section-subtitle fade-in">ğŸ† DÃ©couvrez quelques projets rÃ©alisÃ©s avec passion</p>

  <div class="gallery-grid">
    <div class="gallery-item fade-in">
      <img src="images/real1.jpg" alt="RÃ©novation salle de bain moderne" loading="lazy" onerror="this.src='https://raw.githubusercontent.com/mikaelkapinova-boop/images/main/real1.jpg'">
      <div class="gallery-overlay"><h4>RÃ©novation salle de bain</h4></div>
    </div>

    <div class="gallery-item fade-in">
      <img src="images/real2.jpg" alt="Installation chauffage" loading="lazy" onerror="this.src='https://raw.githubusercontent.com/mikaelkapinova-boop/images/main/real2.jpg'">
      <div class="gallery-overlay"><h4>Installation systÃ¨me de chauffage</h4></div>
    </div>

    <!-- ModifiÃ© : Plomberie cuisine professionnelle -> Salle de bain -->
    <div class="gallery-item fade-in">
      <img src="images/real3.jpg" alt="Salle de bain" loading="lazy" onerror="this.src='https://raw.githubusercontent.com/mikaelkapinova-boop/images/main/real3.jpg'">
      <div class="gallery-overlay"><h4>Salle de bain</h4></div>
    </div>
  </div>
</div>
</section>

<!-- TESTIMONIALS --> <section class="section" id="temoignages"> <div class="container"> <h2 class="section-title fade-in">TÃ‰MOIGNAGES CLIENTS</h2> <p class="section-subtitle fade-in">â­ La satisfaction de nos clients</p>

  <div id="testimonials-list" class="testimonials">
    <!-- Les tÃ©moignages ajoutÃ©s via carte seront insÃ©rÃ©s ici dynamiquement -->
    <div class="testimonial-card fade-in">
      <p style="color:var(--text-secondary)">"Travail impeccable pour la rÃ©novation complÃ¨te de notre salle de bain." â€” Marie L., Nancy</p>
    </div>
  </div>
</div>
</section>

<!-- CONTACT --> <section class="section" id="contact"> <div class="container"> <h2 class="section-title fade-in">CONTACTEZ-NOUS</h2> <p class="section-subtitle fade-in">ğŸ“ Une question ? Un projet ?</p>

  <div style="display:grid; grid-template-columns:1fr 1fr; gap:1rem;">
    <div>
      <div style="background:var(--card-bg); padding:1rem; border-radius:10px; border:1px solid var(--border); margin-bottom:.8rem;">
        <strong>ğŸ“ TÃ©lÃ©phone</strong>
        <p><a href="tel:0749248559" style="color:var(--text); text-decoration:none;">07 49 24 85 59</a></p>
      </div>

      <div style="background:var(--card-bg); padding:1rem; border-radius:10px; border:1px solid var(--border); margin-bottom:.8rem;">
        <strong>ğŸ“§ Email</strong>
        <!-- MAILTO pour ouvrir le client mail du visiteur -->
        <p><a id="contact-email" href="mailto:ms.plomberie.chauffage.nancy@gmail.com" style="color:var(--text); text-decoration:none;">ms.plomberie.chauffage.nancy@gmail.com</a></p>
      </div>

      <div style="background:var(--card-bg); padding:1rem; border-radius:10px; border:1px solid var(--border);">
        <strong>ğŸ“ Zone</strong>
        <p>80km autour de Nancy</p>
      </div>
    </div>

    <form id="contact-form" style="background:var(--card-bg); padding:1rem; border-radius:10px; border:1px solid var(--border);">
      <div style="margin-bottom:.6rem;">
        <label>Nom complet *</label>
        <input type="text" id="name" required style="width:100%;padding:.6rem;border-radius:8px;border:1px solid var(--border);background:transparent;color:var(--text);">
      </div>

      <div style="margin-bottom:.6rem;">
        <label>Email *</label>
        <input type="email" id="email" required style="width:100%;padding:.6rem;border-radius:8px;border:1px solid var(--border);background:transparent;color:var(--text);">
      </div>

      <div style="margin-bottom:.6rem;">
        <label>Message *</label>
        <textarea id="message" required style="width:100%;padding:.6rem;border-radius:8px;border:1px solid var(--border);min-height:100px;background:transparent;color:var(--text);"></textarea>
      </div>

      <button type="submit" class="btn" style="background:var(--accent); color:#fff; width:100%; padding:.7rem; border-radius:8px;">ğŸ“¤ Envoyer ma demande</button>
    </form>
  </div>
</div>
</section>

<!-- FOOTER --> <footer style="background:var(--navbar-bg); padding:1.4rem; text-align:center; border-top:1px solid var(--border); margin-top:1rem;"> <div style="font-weight:700">MS Plomberie & Chauffage</div> <div style="color:var(--text-secondary); margin-top:.5rem;">ğŸ”§ 15 ans d'expÃ©rience â€¢ ğŸ“ <a href="tel:0749248559" style="color:var(--accent); text-decoration:none;">07 49 24 85 59</a> â€¢ ğŸ“ Nancy et 80km alentour</div> <div style="color:var(--text-secondary); font-size:.85rem; margin-top:.5rem;">Â© 2024 MS-PLOMBERIE-CHAUFFAGE - Tous droits rÃ©servÃ©s</div> </footer>

<!-- SCRIPTS: Leaflet + EmailJS + custom --> <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script> <script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script> <script> /* CONFIG EmailJS */ const CONFIG = { emailjs: { publicKey: 'BswSOWv3nFcCn7lQG', serviceId: 'service_j5g070o', templateId: 'template_10dackj' } };

/* DOM references */ const root = document.documentElement; const themeToggle = document.getElementById('theme-toggle'); const menuBtn = document.getElementById('menu-btn'); const menuOverlay = document.getElementById('menu-overlay'); const contactForm = document.getElementById('contact-form'); const testimonialsList = document.getElementById('testimonials-list'); const addTestimonyBtn = document.getElementById('add-testimony-btn');

/* Theme init */ function initTheme() { const saved = localStorage.getItem('theme') || 'dark'; root.setAttribute('data-theme', saved); } themeToggle.addEventListener('click', () => { const cur = root.getAttribute('data-theme'); const next = cur === 'dark' ? 'light' : 'dark'; root.setAttribute('data-theme', next); localStorage.setItem('theme', next); });

/* Menu toggle (2 bars -> cross) */ menuBtn.addEventListener('click', () => { menuBtn.classList.toggle('open'); menuOverlay.classList.toggle('active'); document.body.style.overflow = menuOverlay.classList.contains('active') ? 'hidden' : ''; }); document.querySelectorAll('#menu-overlay a').forEach(a => a.addEventListener('click', () => { menuBtn.classList.remove('open'); menuOverlay.classList.remove('active'); document.body.style.overflow = ''; }));

/* Smooth scrolling offset for header height (56) */ document.querySelectorAll('a[href^="#"]').forEach(anchor => { anchor.addEventListener('click', function(e) { const href = this.getAttribute('href'); if (!href.startsWith('#')) return; const target = document.querySelector(href); if (!target) return; e.preventDefault(); const offsetTop = target.getBoundingClientRect().top + window.scrollY - 56; window.scrollTo({ top: offsetTop, behavior: 'smooth' }); }); });

/* Init EmailJS */ emailjs.init(CONFIG.emailjs.publicKey);

/* Contact form - send via EmailJS */ contactForm.addEventListener('submit', async function(e) { e.preventDefault(); const btn = contactForm.querySelector('button[type="submit"]'); const original = btn.innerHTML; btn.disabled = true; btn.innerText = 'Envoi...'; try { const data = { name: document.getElementById('name').value, email: document.getElementById('email').value, message: document.getElementById('message').value, to_name: 'MS Plomberie & Chauffage', to_email: 'ms.plomberie.chauffage.nancy@gmail.com' }; await emailjs.send(CONFIG.emailjs.serviceId, CONFIG.emailjs.templateId, data); alert('âœ… Message envoyÃ© avec succÃ¨s !'); contactForm.reset(); } catch (err) { console.error(err); alert('âŒ Erreur lors de l'envoi. Merci de tÃ©lÃ©phoner au 07 49 24 85 59'); } finally { btn.disabled = false; btn.innerHTML = original; } });

/* --- LEAFLET MAP: Nancy + cercle 80km + ajout de tÃ©moignages --- */ const nancyLatLng = [48.692054, 6.124485]; const map = L.map('leaflet-map', { center: nancyLatLng, zoom: 9, minZoom:6 }); L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', { attribution: 'Â© OpenStreetMap contributors' }).addTo(map);

// Marker center Nancy L.marker(nancyLatLng).addTo(map).bindPopup('<strong>Nancy</strong>').openPopup();

// Cercle rouge 80km L.circle(nancyLatLng, { radius: 80000, color: 'red', fill:false, weight:2 }).addTo(map);

// Load testimonials from localStorage function loadTestimonials() { const stored = JSON.parse(localStorage.getItem('ms_testimonials') || '[]'); stored.forEach(t => addTestimonyToUI(t, false)); } loadTestimonials();

// Helper: add testimonial to UI and optionally to storage function addTestimonyToUI(t, save=true) { // add marker on map const marker = L.marker([t.lat, t.lng]).addTo(map).bindPopup(<strong>${escapeHtml(t.name)}</strong><br>${escapeHtml(t.message)}<br>â­ ${t.rating || 'â€”'}); // add card in testimonials list const card = document.createElement('div'); card.className = 'testimonial-card fade-in'; card.innerHTML = <p style="color:var(--text-secondary)"><strong>${escapeHtml(t.name)}</strong><br>${escapeHtml(t.message)}<br><em style="color:var(--text-secondary);">â­ ${t.rating || ''}</em></p>; testimonialsList.prepend(card); if (save) { const arr = JSON.parse(localStorage.getItem('ms_testimonials') || '[]'); arr.push(t); localStorage.setItem('ms_testimonials', JSON.stringify(arr)); } }

// Utility escape function escapeHtml(s){ return String(s).replaceAll('&','&').replaceAll('<','<').replaceAll('>','>'); }

// When user clicks "Ajouter un tÃ©moignage" we enable one click on map to place marker and open a prompt form addTestimonyBtn.addEventListener('click', () => { alert('Cliquez sur la carte Ã  l'endroit oÃ¹ vous souhaitez ajouter votre tÃ©moignage (ou cliquez sur Nancy).'); const onMapClick = function(e) { // show a simple prompt sequence (lightweight) â€” can be replaced by modal const name = prompt('Votre nom (ou pseudo) :'); if (!name) { map.off('click', onMapClick); return alert('AnnulÃ©'); } const message = prompt('Votre tÃ©moignage :'); if (!message) { map.off('click', onMapClick); return alert('AnnulÃ©'); } let rating = prompt('Note (1-5) :','5'); rating = rating && !isNaN(rating) ? Math.max(1, Math.min(5, Number(rating))) : ''; const t = { name, message, rating, lat: e.latlng.lat, lng: e.latlng.lng, created: Date.now() }; addTestimonyToUI(t, true); alert('Merci ! Votre tÃ©moignage a Ã©tÃ© ajoutÃ© sur la carte. Il est stockÃ© localement dans votre navigateur.'); map.off('click', onMapClick); }; map.on('click', onMapClick); });

/* Load stored testimonials onto map on init (done above by loadTestimonials) */

/* --- Animations au scroll: IntersectionObserver --- */ function initScrollAnimations() { const opts = { threshold: 0.1, rootMargin: '0px 0px -60px 0px' }; const obs = new IntersectionObserver((entries) => { entries.forEach(en => { if (en.isIntersecting) en.target.classList.add('visible'); }); }, opts); document.querySelectorAll('.fade-in, .slide-in-left, .slide-in-right').forEach(el => obs.observe(el)); } initScrollAnimations();

/* Initial theme */ initTheme();

</script> </body> </html>
